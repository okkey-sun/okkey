# プロジェクト仕様書：MyQuest

## 1. 概要

このアプリはは、Pythonの知識を学習し、その理解度を確認するためのWebアプリケーションである。ユーザーは教材を閲覧し、章ごとのテストや模擬試験を通じて学習を進めることができる。

## 2. 技術スタック

- **バックエンド:** Python, Flask
- **データベース:** SQLite, SQLAlchemy
- **フロントエンド:** HTML, Bootstrap 5
- **データ形式:** JSON

## 3. 主な機能

### 3.1. ユーザー認証

- **ログイン/ログアウト:**
    - ユーザーは事前に定義されたメールアドレスとパスワードでログインする。
    - ログアウト機能によりセッションを破棄できる。
- **ユーザー種別:**
    - **一般ユーザー (student):** 学習コンテンツの閲覧とテストの受験が可能。
    - **管理者 (admin):** 一般ユーザーの機能に加え、管理者専用画面にアクセス可能。

### 3.2. 学習コンテンツ

- **教材閲覧 (`/material`):**
    - Pythonの基礎教材を閲覧できる。
    - (現状は `material.html` という静的なページ)

### 3.3. テスト機能

- **章末テスト (`/section_test`):**
    - ユーザーは特定の章または全範囲を選択してテストを開始できる。
    - 問題と選択肢が一覧で表示され、ユーザーはラジオボタンで回答を選択する。
    - 回答を提出すると、結果画面に遷移する。
- **模擬試験 (`/practice`):**
    - `practice` カテゴリに分類された問題からランダムに1問が出題される。
    - 回答すると、即座に正誤判定の結果が表示される。
- **結果表示 (`/result`):**
    - 章末テストの結果として、総合成績（X問中Y問正解）が表示される。
    - 各問題について、問題文、自身の回答、正解の選択肢、そして正誤が一覧で表示され、復習を助ける。

### 3.4. 管理者機能

- **管理者画面 (`/admin`):**
    - 管理者ユーザーのみがアクセス可能なページ。
    - (現状は `admin.html` という静的なページ)

## 4. データベース設計

### `questions` テーブル

| カラム名  | データ型      | 説明                               |
| --------- | ------------- | ---------------------------------- |
| `id`      | Integer       | 主キー (自動採番)                  |
| `question`| String(300)   | 問題文                             |
| `choice1` | String(200)   | 選択肢1                            |
| `choice2` | String(200)   | 選択肢2                            |
| `choice3` | String(200)   | 選択肢3                            |
| `choice4` | String(200)   | 選択肢4                            |
| `correct` | Integer       | 正解の選択肢番号 (1〜4)            |
| `category`| String(50)    | 問題のカテゴリ (例: `section_1`, `practice`) |

## 5. データフロー

1.  **問題データの準備:**
    - `questions.json` ファイルに、問題、選択肢、正解、カテゴリを定義する。
2.  **データベースへのインポート:**
    - `import_questions.py` スクリプトを実行する。
    - スクリプトは `questions.json` を読み込み、`questions` テーブルにデータを挿入する。
3.  **アプリケーションの利用:**
    - ユーザーがブラウザでアクセスすると、Flaskアプリケーション (`app.py`) がリクエストを処理する。
    - データベースから問題を取得し、HTMLテンプレート (`templates/` ディレクトリ) をレンダリングしてユーザーに表示する。
    - ユーザーの回答はPOSTリクエストとしてサーバーに送信され、正誤判定が行われる。

## 6. 画面一覧

- **`/` (login.html):** ログインページ
- **`/home` (home.html):** ログイン後のメニューページ
- **`/material` (material.html):** 教材ページ
- **`/section_test` (section_test.html):** 章末テストの範囲選択および問題解答ページ
- **`/practice` (practice.html):** 模擬試験の問題解答ページ
- **`/result` (result.html):** テスト結果表示ページ
- **`/admin` (admin.html):** 管理者用ページ
